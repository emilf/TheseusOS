=== HobbyOS UEFI Loader Starting ===
Output driver initialized: QEMU Debug
Collecting graphics information...
✓ Graphics Output Protocol (GOP) found and initialized

┌─────────────────────────────────────────────────────────┐
│                    GOP Information                     │
├─────────────────────────────────────────────────────────┤
│ Resolution:     1280 x 800      pixels
│ Pixel Format:    Bgr
│ Stride:       1280 bytes per scanline
│ Framebuffer Base: 0x0000000080000000
│ Framebuffer Size:  4096000 bytes
│ Total Pixels:    1024000
│ Bytes per Pixel:      1
│ Calculated Size:  1024000 bytes
└─────────────────────────────────────────────────────────┘

✓ Framebuffer information collected and stored in handoff structure
Collecting memory map information...

┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                              Memory Map Entries                                      │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│ #   | Type                 | Physical Start    | Pages   | Size (bytes) | Attributes │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│   1: CONVENTIONAL         | 0x0000000000000000 |      160 pages |     655360 bytes | 0x0000000f
│   2: CONVENTIONAL         | 0x0000000000100000 |     1792 pages |    7340032 bytes | 0x0000000f
│   3: ACPI_NON_VOLATILE    | 0x0000000000800000 |        8 pages |      32768 bytes | 0x0000000f
│   4: CONVENTIONAL         | 0x0000000000808000 |        3 pages |      12288 bytes | 0x0000000f
│   5: ACPI_NON_VOLATILE    | 0x000000000080b000 |        1 pages |       4096 bytes | 0x0000000f
│   6: CONVENTIONAL         | 0x000000000080c000 |        5 pages |      20480 bytes | 0x0000000f
│   7: ACPI_NON_VOLATILE    | 0x0000000000811000 |      239 pages |     978944 bytes | 0x0000000f
│   8: BOOT_SERVICES_DATA   | 0x0000000000900000 |     3712 pages |   15204352 bytes | 0x0000000f
│   9: CONVENTIONAL         | 0x0000000001780000 |    42989 pages |  176082944 bytes | 0x0000000f
│  10: BOOT_SERVICES_DATA   | 0x000000000bf6d000 |       32 pages |     131072 bytes | 0x0000000f
│  11: CONVENTIONAL         | 0x000000000bf8d000 |     8948 pages |   36651008 bytes | 0x0000000f
│  12: LOADER_CODE          | 0x000000000e281000 |       24 pages |      98304 bytes | 0x0000000f
│  13: CONVENTIONAL         | 0x000000000e299000 |       22 pages |      90112 bytes | 0x0000000f
│  14: BOOT_SERVICES_DATA   | 0x000000000e2af000 |     1634 pages |    6692864 bytes | 0x0000000f
│  15: BOOT_SERVICES_CODE   | 0x000000000e911000 |      319 pages |    1306624 bytes | 0x0000000f
│  16: CONVENTIONAL         | 0x000000000ea50000 |       15 pages |      61440 bytes | 0x0000000f
│  17: BOOT_SERVICES_DATA   | 0x000000000ea5f000 |       79 pages |     323584 bytes | 0x0000000f
│  18: CONVENTIONAL         | 0x000000000eaae000 |        2 pages |       8192 bytes | 0x0000000f
│  19: BOOT_SERVICES_DATA   | 0x000000000eab0000 |        6 pages |      24576 bytes | 0x0000000f
│  20: CONVENTIONAL         | 0x000000000eab6000 |        1 pages |       4096 bytes | 0x0000000f
│ ... | (truncated)          | ...              | ...     | ...          | ...        │
└─────────────────────────────────────────────────────────────────────────────────────────┘

✓ Memory map collected successfully

┌─────────────────────────────────────────────────────────┐
│                  Memory Map Information                │
├─────────────────────────────────────────────────────────┤
│ Descriptor Size:     48 bytes
│ Descriptor Version:    1
│ Total Entries:      135
│ Total Buffer Size:   6480 bytes
│ Memory Usage:     6480 bytes
└─────────────────────────────────────────────────────────┘

✓ Memory map information stored in handoff structure
Locating ACPI RSDP table...
  Debug: About to call find_acpi_rsdp
  Debug: find_acpi_rsdp function called
  Debug: Entry 0 - GUID: Guid { time_low: 3998111896, time_mid: [20, 57], time_high_and_version: [89, 66], clock_seq_high_and_reserved: 157, clock_seq_low: 110, node: [220, 123, 215, 148, 3, 207] }
  Debug: Entry 1 - GUID: Guid { time_low: 95237306, time_mid: [2, 111], time_high_and_version: [20, 66], clock_seq_high_and_reserved: 149, clock_seq_low: 46, node: [77, 160, 57, 142, 43, 185] }
  Debug: Entry 2 - GUID: Guid { time_low: 2000286284, time_mid: [215, 147], time_high_and_version: [212, 17], clock_seq_high_and_reserved: 154, clock_seq_low: 58, node: [0, 144, 39, 63, 193, 77] }
  Debug: Entry 3 - GUID: Guid { time_low: 1276707999, time_mid: [55, 65], time_high_and_version: [211, 77], clock_seq_high_and_reserved: 156, clock_seq_low: 16, node: [139, 151, 168, 63, 253, 250] }
  Debug: Entry 4 - GUID: Guid { time_low: 1226124919, time_mid: [218, 26], time_high_and_version: [100, 71], clock_seq_high_and_reserved: 183, clock_seq_low: 162, node: [122, 254, 254, 217, 94, 139] }
  Debug: Entry 5 - GUID: Guid { time_low: 101498918, time_mid: [13, 76], time_high_and_version: [218, 77], clock_seq_high_and_reserved: 143, clock_seq_low: 65, node: [89, 95, 239, 0, 165, 2] }
  Debug: Entry 6 - GUID: Guid { time_low: 3952946481, time_mid: [136, 45], time_high_and_version: [211, 17], clock_seq_high_and_reserved: 154, clock_seq_low: 22, node: [0, 144, 39, 63, 193, 77] }
  Debug: Entry 7 - GUID: Guid { time_low: 3952946480, time_mid: [136, 45], time_high_and_version: [211, 17], clock_seq_high_and_reserved: 154, clock_seq_low: 22, node: [0, 144, 39, 63, 193, 77] }
  Debug: Entry 8 - GUID: Guid { time_low: 2288576625, time_mid: [241, 228], time_high_and_version: [211, 17], clock_seq_high_and_reserved: 188, clock_seq_low: 34, node: [0, 128, 199, 60, 136, 129] }
  Debug: Found ACPI 2.0 RSDP at 0x000000000FB7E014
  Debug: find_acpi_rsdp returned
✓ ACPI RSDP table found

┌─────────────────────────────────────────────────────────┐
│                    ACPI Information                     │
├─────────────────────────────────────────────────────────┤
│ RSDP Table Found: 0x000000000FB7E014
│ ✓ ACPI support will be available to kernel
✓ ACPI tables parsed successfully
  Platform info available: true
└─────────────────────────────────────────────────────────┘

✓ ACPI information stored in handoff structure
Collecting device tree information...
✗ Device tree information not available

┌─────────────────────────────────────────────────────────┐
│                  Device Tree Information                │
├─────────────────────────────────────────────────────────┤
│ DTB Address: Not found (0x0000000000000000)          │
│ DTB Size: 0 bytes                                   │
│ Status: ✗ Device tree blob not found               │
│ Note: Device tree is typically used on ARM systems │
└─────────────────────────────────────────────────────────┘

Collecting firmware information...
✗ Firmware information not available

┌─────────────────────────────────────────────────────────┐
│                   Firmware Information                  │
├─────────────────────────────────────────────────────────┤
│ Vendor Pointer: Not available (0x0000000000000000)   │
│ Vendor Length: 0 characters                         │
│ Firmware Revision: Not available (0x00000000)       │
│ Status: ✗ Firmware information not available        │
└─────────────────────────────────────────────────────────┘

Collecting boot time information...
✗ Boot time information not available

┌─────────────────────────────────────────────────────────┐
│                   Boot Time Information                 │
├─────────────────────────────────────────────────────────┤
│ Boot Time: Not available (0 seconds)                 │
│ Nanoseconds: Not available (0 ns)                    │
│ Status: ✗ Boot time information not available        │
└─────────────────────────────────────────────────────────┘

Collecting boot device path information...
✗ Boot device path information not available

┌─────────────────────────────────────────────────────────┐
│                Boot Device Path Information             │
├─────────────────────────────────────────────────────────┤
│ Device Path Pointer: Not available (0x0000000000000000) │
│ Device Path Size: 0 bytes                            │
│ Status: ✗ Boot device path information not available │
└─────────────────────────────────────────────────────────┘

Collecting CPU information...
✗ CPU information not available

┌─────────────────────────────────────────────────────────┐
│                     CPU Information                     │
├─────────────────────────────────────────────────────────┤
│ CPU Count: Not available (0 processors)              │
│ CPU Features: Not available (0x0000000000000000)      │
│ Microcode Revision: Not available (0x00000000)       │
│ Status: ✗ CPU information not available              │
└─────────────────────────────────────────────────────────┘

Collecting hardware inventory...
Collecting hardware inventory using device paths...
Found 22 device path handles
✓ Hardware inventory collected: 22 devices
✓ Hardware inventory collected

┌─────────────────────────────────────────────────────────┐
│                Hardware Device Inventory               │
├─────────────────────────────────────────────────────────┤
│ Total Devices Found: 22                              │
│ Inventory Size: 704 bytes (0.69 KB)              │
│ Devices Pointer: 0x000000000eab6118                    │
├─────────────────────────────────────────────────────────┤
│ Device Type Summary:                                  │
│   Device Path Handles: Found                         │
│   Human-Readable Paths: Available                     │
│   Protocol Support: DevicePathToText                  │
└─────────────────────────────────────────────────────────┘

Getting loaded image device path...
Getting loaded image device path...
✓ Loaded image device path found
  Path pointer: 0x000000000eab5f18
✓ Loaded image device path collected

┌─────────────────────────────────────────────────────────┐
│                Boot Device Path Information             │
├─────────────────────────────────────────────────────────┤
│ Device Path Pointer: 0x000000000eab5f18                    │
│ Device Path Size: 0 bytes                        │
│ Status: ✓ Boot device path information collected     │
└─────────────────────────────────────────────────────────┘

Finalizing handoff structure...
✓ Handoff structure size: 208 bytes
✓ All system information collected and stored
Exiting boot services...
Memory map key: MemoryMapKey(1486)
✓ Memory map ready for kernel handoff
Exiting boot services...
About to call load_kernel_binary...
=== Loading Kernel Binary ===
Starting kernel loading process...
Searching for kernel file...
Trying PoC approach first...
=== PoC: Testing SimpleFileSystem access ===
✓ Got image handle
Attempting to get SimpleFileSystem using get_image_file_system...
✓ Successfully got SimpleFileSystem using get_image_file_system
✓ Opened root directory
✓ Successfully opened kernel.efi file
✓ Kernel file is a regular file
✓ PoC: SimpleFileSystem access successful!
PoC succeeded! Now trying to actually load the kernel...
Locating SimpleFileSystem protocol handles...
✓ Found 1 SimpleFileSystem handles
Attempting to open SimpleFileSystem protocol...
✓ Opened SimpleFileSystem protocol
✓ Opened root directory
Looking for kernel at: \kernel.efi
✓ Opened kernel file
✓ Converted to RegularFile
✓ Kernel file found
✓ Kernel file found
Getting kernel file information...
✓ Entered get_kernel_file_info
✓ Got actual file size from FileInfo
Kernel file size: 16160 bytes (0.02 MB)
✓ Kernel file size acceptable
✓ Kernel file info obtained
Reading kernel binary from file...
✓ Entered read_kernel_binary
✓ Allocated kernel buffer
✓ Read kernel binary from file
✓ Kernel binary read successfully
✓ Kernel binary read
Analyzing kernel binary...
✓ Valid ELF magic number found
✓ Kernel analysis complete
  Entry point: 0xFFFFFFFF80000000
  Total memory required: 131072 bytes (0.12 MB)
  Sections: 4
    .text: 0xFFFFFFFF80000000 - 0xFFFFFFFF8000FFFF (65536 bytes)
    .rodata: 0xFFFFFFFF80010000 - 0xFFFFFFFF80017FFF (32768 bytes)
    .data: 0xFFFFFFFF80018000 - 0xFFFFFFFF8001BFFF (16384 bytes)
    .bss: 0xFFFFFFFF8001C000 - 0xFFFFFFFF8001FFFF (16384 bytes)
Allocating memory for kernel...
Searching for free memory region (131072 bytes required)...
  Free region: 0x0000000000000000 - 0x000000000009FFFF (655360 bytes)
    ✓ Suitable region found at 0x0000000000000000 (655360 bytes)
  Free region: 0x0000000000100000 - 0x00000000007FFFFF (7340032 bytes)
  Free region: 0x0000000000808000 - 0x000000000080AFFF (12288 bytes)
  Free region: 0x000000000080C000 - 0x0000000000810FFF (20480 bytes)
  Free region: 0x0000000001780000 - 0x000000000BF6CFFF (176082944 bytes)
  Free region: 0x000000000BF8D000 - 0x000000000E280FFF (36651008 bytes)
  Free region: 0x000000000E299000 - 0x000000000E2AEFFF (90112 bytes)
  Free region: 0x000000000EA50000 - 0x000000000EA5EFFF (61440 bytes)
  Free region: 0x000000000EAAE000 - 0x000000000EAAFFFF (8192 bytes)
  Free region: 0x000000000EAB6000 - 0x000000000EAB6FFF (4096 bytes)
  Free region: 0x000000000FE00000 - 0x000000000FE6DFFF (450560 bytes)
    ✓ Better region found at 0x000000000FE00000 (450560 bytes)
Total free memory available: 221376512 bytes (211.12 MB)
✓ Selected memory region: 0x000000000FE00000 (450560 bytes, 0.43 MB)
✓ Memory allocated at 0x000000000FE00000
Loading kernel sections into memory...
Loading kernel at physical address: 0x0000000000100000
  .text: 0xFFFFFFFF80000000 -> 0x0000000000100000
  .rodata: 0xFFFFFFFF80010000 -> 0x0000000000110000
  .data: 0xFFFFFFFF80018000 -> 0x0000000000118000
  .bss: 0xFFFFFFFF8001C000 -> 0x000000000011C000
    Zeroing 16384 bytes for BSS section
✓ Kernel sections loaded successfully
✓ Kernel binary loaded successfully
  Physical base: 0x0000000000100000
  Entry point (physical): 0x0000000000100000
  Entry point (virtual): 0xFFFFFFFF80000000
✓ Kernel loaded successfully, exiting boot services...
✓ Successfully exited boot services
BOOTLOADER PANIC: Panic occurred
